# ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ  ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## æ¦‚è¦

Coordyã®ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãƒã‚¤ãƒ³ãƒˆã‚’ãƒãƒ£ãƒ¼ã‚¸ã—ã€ãã®ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒ“ã‚¹ã‚’äºˆç´„ã™ã‚‹ä»•çµ„ã¿ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®å…¨ä½“åƒã€ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã€å®Ÿè£…è©³ç´°ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“åƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  1. æ–°è¦ç™»éŒ² â†’ ãƒ¡ãƒ¼ãƒ«æ¤œè¨¼ â†’ ãƒ­ã‚°ã‚¤ãƒ³                         â”‚
â”‚  2. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šï¼ˆå¿…é ˆï¼‰                                  â”‚
â”‚  3. ãƒã‚¤ãƒ³ãƒˆãƒãƒ£ãƒ¼ã‚¸                                          â”‚
â”‚  4. ã‚µãƒ¼ãƒ“ã‚¹æ¤œç´¢ãƒ»é–²è¦§                                        â”‚
â”‚  5. ã‚µãƒ¼ãƒ“ã‚¹äºˆç´„ï¼ˆãƒã‚¤ãƒ³ãƒˆä½¿ç”¨ï¼‰                              â”‚
â”‚  6. äºˆç´„ç®¡ç†ãƒ»æ´»å‹•å±¥æ­´                                        â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                â†“                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cognito Auth â”‚  â”‚ Amplify Data â”‚  â”‚   DynamoDB   â”‚
â”‚   (èªè¨¼)     â”‚  â”‚  (GraphQL)   â”‚  â”‚  (ãƒ‡ãƒ¼ã‚¿)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 1. ClientProfileï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼‰

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è©³ç´°æƒ…å ±ã‚’ç®¡ç†ã—ã¾ã™ã€‚

```typescript
ClientProfile {
  id: ID!
  clientId: ID!              // Cognito User ID
  name: String!              // æ°åï¼ˆå¿…é ˆï¼‰
  address: String            // ä½æ‰€ï¼ˆå¿…é ˆï¼‰
  phoneNumber: String        // é›»è©±ç•ªå·ï¼ˆå¿…é ˆï¼‰
  dateOfBirth: AWSDate       // ç”Ÿå¹´æœˆæ—¥ï¼ˆä»»æ„ï¼‰
  gender: String             // æ€§åˆ¥ï¼ˆä»»æ„ï¼‰
  isProfileComplete: Boolean // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å®Œäº†ãƒ•ãƒ©ã‚°
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}
```

**é‡è¦ãªä»•æ§˜**:
- `isProfileComplete`: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šãŒå®Œäº†ã—ãŸã‹ã‚’ç¤ºã™ãƒ•ãƒ©ã‚°
- ã“ã®ãƒ•ãƒ©ã‚°ãŒ`false`ã®å ´åˆã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããšã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã¾ã™

### 2. ClientWalletï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆï¼‰

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒã‚¤ãƒ³ãƒˆæ®‹é«˜ã‚’ç®¡ç†ã—ã¾ã™ã€‚

```typescript
ClientWallet {
  id: ID!
  clientId: ID!         // Cognito User ID
  balance: Int!         // ãƒã‚¤ãƒ³ãƒˆæ®‹é«˜ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0ï¼‰
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}
```

**é‡è¦ãªä»•æ§˜**:
- å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«1ã¤ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãŒè‡ªå‹•ä½œæˆã•ã‚Œã¾ã™
- æ®‹é«˜ã¯å¸¸ã«0ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆè² ã®å€¤ã¯è¨±å¯ã•ã‚Œã¾ã›ã‚“ï¼‰

### 3. PointTransactionï¼ˆãƒã‚¤ãƒ³ãƒˆå–å¼•å±¥æ­´ï¼‰

ãƒã‚¤ãƒ³ãƒˆã®ãƒãƒ£ãƒ¼ã‚¸ã¨ä½¿ç”¨ã®å±¥æ­´ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

```typescript
PointTransaction {
  id: ID!
  clientId: ID!                  // Cognito User ID
  type: String!                  // 'charge' | 'use'
  amount: Int!                   // é‡‘é¡ï¼ˆãƒã‚¤ãƒ³ãƒˆï¼‰
  method: String                 // 'credit' | 'bankTransfer'ï¼ˆchargeã®å ´åˆã®ã¿ï¼‰
  status: String!                // 'pending' | 'completed' | 'failed'
  description: String            // å–å¼•ã®èª¬æ˜
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}
```

**å–å¼•ã‚¿ã‚¤ãƒ—**:
- `charge`: ãƒã‚¤ãƒ³ãƒˆã®ãƒãƒ£ãƒ¼ã‚¸ï¼ˆè¿½åŠ ï¼‰
- `use`: ãƒã‚¤ãƒ³ãƒˆã®ä½¿ç”¨ï¼ˆæ¸›ç®—ï¼‰

**ãƒãƒ£ãƒ¼ã‚¸æ–¹æ³•**:
- `credit`: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆï¼ˆå³æ™‚åæ˜ ã€status: 'completed'ï¼‰
- `bankTransfer`: éŠ€è¡ŒæŒ¯è¾¼ï¼ˆæ‰¿èªå¾…ã¡ã€status: 'pending' â†’ ç®¡ç†è€…æ‰¿èªå¾Œ 'completed'ï¼‰

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**:
- `pending`: æ‰¿èªå¾…ã¡ï¼ˆéŠ€è¡ŒæŒ¯è¾¼ã®å ´åˆï¼‰
- `completed`: å®Œäº†
- `failed`: å¤±æ•—

### 4. FavoriteCreatorï¼ˆãŠæ°—ã«å…¥ã‚Šã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ï¼‰

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãŠæ°—ã«å…¥ã‚Šç™»éŒ²ã—ãŸã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã‚’ç®¡ç†ã—ã¾ã™ã€‚

```typescript
FavoriteCreator {
  id: ID!
  clientId: ID!         // Cognito User ID
  instructorId: ID!     // ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ID
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}
```

**ç”¨é€”**:
- ãŠæ°—ã«å…¥ã‚Šã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«å„ªå…ˆè¡¨ç¤º
- ãŠæ°—ã«å…¥ã‚Šç®¡ç†ãƒšãƒ¼ã‚¸ã§ã®ä¸€è¦§è¡¨ç¤º

## å®Ÿè£…è©³ç´°

### 1. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šãƒ•ãƒ­ãƒ¼

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **ãƒšãƒ¼ã‚¸**: `app/user/profile/setup/page.tsx`
- **API**: `lib/api/profile.ts`

#### ãƒ•ãƒ­ãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
   â†“
2. Protected Layout (`app/user/(protected)/layout.tsx`) ã§èªè¨¼ãƒã‚§ãƒƒã‚¯
   â†“
3. `isProfileComplete(userId)` ã§ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å®Œäº†çŠ¶æ…‹ã‚’ç¢ºèª
   â†“
4. æœªå®Œäº†ã®å ´åˆ â†’ `/user/profile/setup` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
   â†“
5. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’å…¥åŠ›ãƒ»ä¿å­˜
   â†“
6. `isProfileComplete: true` ã‚’è¨­å®š
   â†“
7. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (`/user`) ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
```

#### å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹

```typescript
// app/user/(protected)/layout.tsx
useEffect(() => {
  const checkAuth = async () => {
    const session = getSession();

    if (!session || !hasRole('user')) {
      router.push('/login/user');
      return;
    }

    // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å®Œäº†ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šãƒšãƒ¼ã‚¸ä»¥å¤–ï¼‰
    if (!pathname.includes('/profile/setup')) {
      const profileComplete = await isProfileComplete(session.userId);
      if (!profileComplete) {
        router.push('/user/profile/setup');
        return;
      }
    }

    setUser(session);
    setLoading(false);
  };

  checkAuth();
}, [router, pathname]);
```

### 2. ãƒã‚¤ãƒ³ãƒˆãƒãƒ£ãƒ¼ã‚¸ãƒ•ãƒ­ãƒ¼

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **ãƒšãƒ¼ã‚¸**: `app/user/wallet/page.tsx`
- **API**: `lib/api/wallet.ts`

#### ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ãƒãƒ£ãƒ¼ã‚¸

```
1. ãƒãƒ£ãƒ¼ã‚¸é¡ã‚’å…¥åŠ›ï¼ˆä¾‹: 5000ï¼‰
   â†“
2. ã€Œã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã€ã‚’é¸æŠ
   â†“
3. `chargePoints(userId, 5000, 'credit')` ã‚’å‘¼ã³å‡ºã—
   â†“
4. ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ®‹é«˜ã‚’æ›´æ–°ï¼ˆ+5000ï¼‰
   â†“
5. PointTransactionãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
   - type: 'charge'
   - amount: 5000
   - method: 'credit'
   - status: 'completed'
   â†“
6. UIæ›´æ–°ï¼ˆæ®‹é«˜è¡¨ç¤ºã€å–å¼•å±¥æ­´ã€ãƒ˜ãƒƒãƒ€ãƒ¼ï¼‰
```

#### éŠ€è¡ŒæŒ¯è¾¼ãƒãƒ£ãƒ¼ã‚¸

```
1. ãƒãƒ£ãƒ¼ã‚¸é¡ã‚’å…¥åŠ›ï¼ˆä¾‹: 3000ï¼‰
   â†“
2. ã€ŒéŠ€è¡ŒæŒ¯è¾¼ã€ã‚’é¸æŠ
   â†“
3. æŒ¯è¾¼å…ˆæƒ…å ±ã‚’è¡¨ç¤º
   â†“
4. `chargePoints(userId, 3000, 'bankTransfer')` ã‚’å‘¼ã³å‡ºã—
   â†“
5. PointTransactionãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆï¼ˆæ®‹é«˜ã¯æœªæ›´æ–°ï¼‰
   - type: 'charge'
   - amount: 3000
   - method: 'bankTransfer'
   - status: 'pending'
   â†“
6. ç®¡ç†è€…ãŒæŒ¯è¾¼ã‚’ç¢ºèªå¾Œã€æ‰‹å‹•ã§æ‰¿èª
   â†“
7. status ã‚’ 'completed' ã«æ›´æ–° & ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ®‹é«˜ã‚’æ›´æ–°
```

#### å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹

```typescript
// lib/api/wallet.ts
export async function chargePoints(
  clientId: string,
  amount: number,
  method: 'credit' | 'bankTransfer'
) {
  const client = getDataClient();

  // ã‚¦ã‚©ãƒ¬ãƒƒãƒˆå–å¾—ã¾ãŸã¯ä½œæˆ
  let wallet = await getClientWallet(clientId);
  if (!wallet) {
    wallet = await createClientWallet(clientId);
  }

  // å³æ™‚åæ˜  or æ‰¿èªå¾…ã¡
  const status = method === 'credit' ? 'completed' : 'pending';
  const newBalance = method === 'credit'
    ? (wallet.balance || 0) + amount
    : wallet.balance || 0;

  // ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ›´æ–°ï¼ˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®å ´åˆã®ã¿ï¼‰
  if (method === 'credit') {
    await client.models.ClientWallet.update({
      id: wallet.id,
      balance: newBalance,
    });
  }

  // å–å¼•å±¥æ­´ä½œæˆ
  await client.models.PointTransaction.create({
    clientId,
    type: 'charge',
    amount,
    method,
    status,
    description: method === 'credit'
      ? 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ãƒãƒ£ãƒ¼ã‚¸'
      : 'éŠ€è¡ŒæŒ¯è¾¼ãƒãƒ£ãƒ¼ã‚¸ï¼ˆæ‰¿èªå¾…ã¡ï¼‰',
  });

  return { success: true, newBalance };
}
```

### 3. ãƒã‚¤ãƒ³ãƒˆæ®‹é«˜è¡¨ç¤º

#### ãƒ˜ãƒƒãƒ€ãƒ¼ã§ã®è¡¨ç¤º

**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `components/layout/AppHeader.tsx`

```typescript
const [balance, setBalance] = useState<number | null>(null);

useEffect(() => {
  const loadBalance = async () => {
    const session = getSession();
    if (session) {
      try {
        const wallet = await getClientWallet(session.userId);
        setBalance(wallet?.balance || 0);
      } catch (err) {
        console.error('æ®‹é«˜å–å¾—ã‚¨ãƒ©ãƒ¼:', err);
      }
    }
  };

  loadBalance();
}, [pathname]); // pathnameãŒå¤‰ã‚ã‚‹ãŸã³ã«å†èª­ã¿è¾¼ã¿
```

**è¡¨ç¤ºä½ç½®**:
- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: ãƒ˜ãƒƒãƒ€ãƒ¼å³å´ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã®å·¦
- ãƒ¢ãƒã‚¤ãƒ«: éè¡¨ç¤ºï¼ˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆãƒšãƒ¼ã‚¸ã§ã®ã¿ç¢ºèªï¼‰

### 4. ã‚µãƒ¼ãƒ“ã‚¹äºˆç´„ï¼ˆãƒã‚¤ãƒ³ãƒˆä½¿ç”¨ï¼‰

#### ãƒ•ãƒ­ãƒ¼ï¼ˆå®Ÿè£…äºˆå®šï¼‰

```
1. ã‚µãƒ¼ãƒ“ã‚¹è©³ç´°ãƒšãƒ¼ã‚¸ã§ã€Œäºˆç´„ã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   â†“
2. æ—¥æ™‚ãƒ»äººæ•°ã‚’é¸æŠ
   â†“
3. å¿…è¦ãƒã‚¤ãƒ³ãƒˆã‚’è¨ˆç®—ï¼ˆbasePrice Ã— participantsï¼‰
   â†“
4. ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ®‹é«˜ãƒã‚§ãƒƒã‚¯
   â†“
5a. æ®‹é«˜ä¸è¶³ â†’ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ & ãƒãƒ£ãƒ¼ã‚¸ãƒšãƒ¼ã‚¸ã¸èª˜å°
   â†“
5b. æ®‹é«˜ååˆ† â†’ äºˆç´„ã‚’ä½œæˆ
   â†“
6. `usePoints(userId, amount, reservationId)` ã‚’å‘¼ã³å‡ºã—
   â†“
7. ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ®‹é«˜ã‚’æ¸›ç®—
   â†“
8. PointTransactionãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
   - type: 'use'
   - amount: å¿…è¦ãƒã‚¤ãƒ³ãƒˆ
   - status: 'completed'
   - description: 'ã‚µãƒ¼ãƒ“ã‚¹äºˆç´„: [ã‚µãƒ¼ãƒ“ã‚¹å]'
   â†“
9. Reservationãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
   â†“
10. äºˆç´„ç¢ºèªãƒšãƒ¼ã‚¸ã«é·ç§»
```

#### å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹ï¼ˆäºˆå®šï¼‰

```typescript
// lib/api/wallet.ts
export async function usePoints(
  clientId: string,
  amount: number,
  description: string
) {
  const client = getDataClient();

  // ã‚¦ã‚©ãƒ¬ãƒƒãƒˆå–å¾—
  const wallet = await getClientWallet(clientId);
  if (!wallet) {
    throw new Error('ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
  }

  // æ®‹é«˜ãƒã‚§ãƒƒã‚¯
  if ((wallet.balance || 0) < amount) {
    throw new Error('ãƒã‚¤ãƒ³ãƒˆæ®‹é«˜ãŒä¸è¶³ã—ã¦ã„ã¾ã™');
  }

  // ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ›´æ–°
  const newBalance = (wallet.balance || 0) - amount;
  await client.models.ClientWallet.update({
    id: wallet.id,
    balance: newBalance,
  });

  // å–å¼•å±¥æ­´ä½œæˆ
  await client.models.PointTransaction.create({
    clientId,
    type: 'use',
    amount,
    status: 'completed',
    description,
  });

  return { success: true, newBalance };
}
```

### 5. ãŠæ°—ã«å…¥ã‚Šã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼æ©Ÿèƒ½

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **API**: `lib/api/favorites.ts`
- **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: `app/user/(protected)/page.tsx`

#### ãƒ•ãƒ­ãƒ¼

```
1. ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼è©³ç´°ãƒšãƒ¼ã‚¸ã§ã€ŒãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   â†“
2. `addFavoriteCreator(userId, instructorId)` ã‚’å‘¼ã³å‡ºã—
   â†“
3. FavoriteCreatorãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
   â†“
4. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹
   â†“
5. `getFavoriteCreators(userId)` ã§ãŠæ°—ã«å…¥ã‚Šä¸€è¦§ã‚’å–å¾—
   â†“
6. ãŠæ°—ã«å…¥ã‚Šã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
   â†“
7. ã€ŒãŠæ°—ã«å…¥ã‚Šã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®ã‚µãƒ¼ãƒ“ã‚¹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¡¨ç¤º
```

#### å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹

```typescript
// app/user/(protected)/page.tsx
useEffect(() => {
  const loadData = async (userId: string) => {
    // ãŠæ°—ã«å…¥ã‚Šã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®ã‚µãƒ¼ãƒ“ã‚¹å–å¾—
    const favorites = await getFavoriteCreators(userId);
    if (favorites.length > 0) {
      const instructorIds = favorites.map((fav) => fav.instructorId);
      const allServices = await listServices({ status: 'published' });
      const favoriteServices = allServices
        .filter((service) => instructorIds.includes(service.instructorId))
        .slice(0, 6);

      setFavoriteCreatorServices(favoriteServices);
    }
  };

  loadData(user.userId);
}, [user]);
```

## UI/UXãƒ•ãƒ­ãƒ¼

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ˜ãƒƒãƒ€ãƒ¼                                                      â”‚
â”‚ [â˜°] [â†] [ğŸ  Coordy]  [å¤ªéƒã•ã‚“] [ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ] [5000pt] [ğŸ‘¤] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚ˆã†ã“ãã€å¤ªéƒã•ã‚“ï¼                                          â”‚
â”‚ ä»Šæ—¥ã‚‚ç´ æ™´ã‚‰ã—ã„ä¸€æ—¥ã«ã—ã¾ã—ã‚‡ã†                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¬¡ã®äºˆç´„     â”‚ â”‚ ä»Šæ—¥ã®TODO   â”‚ â”‚ ã‚¯ã‚¤ãƒƒã‚¯     â”‚
â”‚              â”‚ â”‚              â”‚ â”‚ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³   â”‚
â”‚ äºˆç´„ã¯ã¾ã    â”‚ â”‚ TODOã¯ã¾ã    â”‚ â”‚ [ã‚µãƒ¼ãƒ“ã‚¹ã‚’  â”‚
â”‚ ã‚ã‚Šã¾ã›ã‚“   â”‚ â”‚ ã‚ã‚Šã¾ã›ã‚“   â”‚ â”‚  æ¢ã™]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚ãªãŸã¸ã®ãŠã™ã™ã‚ã‚µãƒ¼ãƒ“ã‚¹              [ã™ã¹ã¦è¦‹ã‚‹ â†’]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚ â”‚ãƒ¨ã‚¬  â”‚  â”‚ç­‹ãƒˆãƒ¬â”‚  â”‚ãƒ”ãƒ©  â”‚  ...                         â”‚
â”‚ â”‚3000ptâ”‚  â”‚8000ptâ”‚  â”‚4000ptâ”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãŠæ°—ã«å…¥ã‚Šã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®ã‚µãƒ¼ãƒ“ã‚¹      [ãŠæ°—ã«å…¥ã‚Šç®¡ç† â†’]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚ â”‚ãƒ¨ã‚¬  â”‚  â”‚ãƒ¨ã‚¬  â”‚  ...                                   â”‚
â”‚ â”‚3000ptâ”‚  â”‚4500ptâ”‚                                        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãƒšãƒ¼ã‚¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒã‚¤ãƒ³ãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆ                                            â”‚
â”‚ ãƒã‚¤ãƒ³ãƒˆã‚’ãƒãƒ£ãƒ¼ã‚¸ã—ã¦ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’äºˆç´„ã§ãã¾ã™                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¾åœ¨ã®æ®‹é«˜                                                    â”‚
â”‚ 5,000pt                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒã‚¤ãƒ³ãƒˆã‚’ãƒãƒ£ãƒ¼ã‚¸                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒãƒ£ãƒ¼ã‚¸é¡ï¼ˆãƒã‚¤ãƒ³ãƒˆï¼‰: [    1000    ]                       â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚ â”‚ ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ â”‚  â”‚   éŠ€è¡ŒæŒ¯è¾¼       â”‚                 â”‚
â”‚ â”‚ ğŸ’³ å³æ™‚åæ˜      â”‚  â”‚   ğŸ¦ æ‰¿èªå¾Œåæ˜   â”‚                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                               â”‚
â”‚ [+ ãƒãƒ£ãƒ¼ã‚¸ã™ã‚‹]                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å–å¼•å±¥æ­´                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â†“ ãƒãƒ£ãƒ¼ã‚¸                +5,000pt   2024/11/23 10:30       â”‚
â”‚ â†‘ ã‚µãƒ¼ãƒ“ã‚¹äºˆç´„            -3,000pt   2024/11/22 14:15       â”‚
â”‚ â†“ ãƒãƒ£ãƒ¼ã‚¸ï¼ˆæ‰¿èªå¾…ã¡ï¼‰    +3,000pt   2024/11/21 09:00       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### 1. èªå¯è¨­å®š

ã™ã¹ã¦ã®ãƒã‚¤ãƒ³ãƒˆé–¢é€£ãƒ¢ãƒ‡ãƒ«ã¯ã€ã‚ªãƒ¼ãƒŠãƒ¼ã®ã¿ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚

```typescript
.authorization((allow) => [
  allow.owner(), // è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
])
```

### 2. æ®‹é«˜ãƒã‚§ãƒƒã‚¯

ãƒã‚¤ãƒ³ãƒˆä½¿ç”¨æ™‚ã«ã¯å¿…ãšæ®‹é«˜ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã€ä¸æ­£ãªæ“ä½œã‚’é˜²ãã¾ã™ã€‚

```typescript
if ((wallet.balance || 0) < amount) {
  throw new Error('ãƒã‚¤ãƒ³ãƒˆæ®‹é«˜ãŒä¸è¶³ã—ã¦ã„ã¾ã™');
}
```

### 3. ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³æ•´åˆæ€§

ç¾åœ¨ã®å®Ÿè£…ã§ã¯ã€ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ›´æ–°ã¨å–å¼•å±¥æ­´ä½œæˆã‚’åˆ¥ã€…ã«å®Ÿè¡Œã—ã¦ã„ã¾ã™ãŒã€æœ¬ç•ªç’°å¢ƒã§ã¯ä»¥ä¸‹ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ï¼š

- DynamoDB Transactionsã®ä½¿ç”¨
- æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ã®å®Ÿè£…
- ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã®è¿½åŠ 

## ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

### 1. ãƒã‚¤ãƒ³ãƒˆæœ‰åŠ¹æœŸé™

```typescript
PointTransaction {
  expiresAt: AWSDateTime  // æœ‰åŠ¹æœŸé™
}
```

### 2. ãƒã‚¤ãƒ³ãƒˆæ‰•ã„æˆ»ã—

```typescript
// äºˆç´„ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã®ãƒã‚¤ãƒ³ãƒˆè¿”é‚„
async function refundPoints(
  clientId: string,
  amount: number,
  reservationId: string
) {
  // ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ®‹é«˜ã‚’å¢—ã‚„ã™
  // 'refund' ã‚¿ã‚¤ãƒ—ã®å–å¼•å±¥æ­´ã‚’ä½œæˆ
}
```

### 3. ãƒã‚¤ãƒ³ãƒˆå±¥æ­´ã®è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

- æ—¥ä»˜ç¯„å›²ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- ã‚¿ã‚¤ãƒ—åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆcharge/use/refundï¼‰
- é‡‘é¡ç¯„å›²ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

### 4. ç®¡ç†è€…æ©Ÿèƒ½

- éŠ€è¡ŒæŒ¯è¾¼ã®æ‰¿èªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ãƒã‚¤ãƒ³ãƒˆèª¿æ•´ï¼ˆæ‰‹å‹•åŠ ç®—ãƒ»æ¸›ç®—ï¼‰
- å–å¼•å±¥æ­´ã®ç›£æŸ»ãƒ­ã‚°

## ã¾ã¨ã‚

Coordyã®ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã¯ã€ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã£ã¦ã„ã¾ã™ï¼š

1. **ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­è¨ˆ**: ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ®‹é«˜ã¨å–å¼•å±¥æ­´ã®ã¿ã§ç®¡ç†
2. **æŸ”è»Ÿãªãƒãƒ£ãƒ¼ã‚¸æ–¹æ³•**: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ï¼ˆå³æ™‚ï¼‰ã¨éŠ€è¡ŒæŒ¯è¾¼ï¼ˆæ‰¿èªåˆ¶ï¼‰
3. **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å®Œäº†ã‚²ãƒ¼ãƒˆ**: ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨å‰ã®å¿…é ˆæƒ…å ±åé›†
4. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: ãƒãƒ£ãƒ¼ã‚¸ã‚„ä½¿ç”¨å¾Œã®å³åº§ã®æ®‹é«˜åæ˜ 
5. **ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½**: ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹æ¨è–¦

ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€ä»Šå¾Œã®æ‹¡å¼µï¼ˆãƒã‚¤ãƒ³ãƒˆæœ‰åŠ¹æœŸé™ã€æ‰•ã„æˆ»ã—ã€ç®¡ç†è€…æ©Ÿèƒ½ãªã©ï¼‰ã«ã‚‚å¯¾å¿œã§ãã‚‹æŸ”è»Ÿãªè¨­è¨ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚
